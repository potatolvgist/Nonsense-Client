package wtf.bhopper.nonsense.module.impl.exploit;

import meteordevelopment.orbit.EventHandler;
import net.minecraft.network.play.client.C0BPacketEntityAction;
import wtf.bhopper.nonsense.event.impl.EventPreTick;
import wtf.bhopper.nonsense.module.Module;
import wtf.bhopper.nonsense.module.setting.impl.EnumSetting;
import wtf.bhopper.nonsense.util.minecraft.client.PacketUtil;

public class Disabler extends Module {

    private final EnumSetting<Mode> mode = new EnumSetting<>("Mode", "mode", Mode.MINIBLOX);

    public Disabler() {
        super("Disabler", "Bye bye bad anticheat!", Category.EXPLOIT);
        this.addSettings(mode);
    }

    @EventHandler
    public void onTick(EventPreTick event) {
        if (mode.is(Mode.MINIBLOX)) {
            if (mc.thePlayer.ticksExisted % 9 == 0 && !mc.thePlayer.isPlayerSleeping()) {
                PacketUtil.send(new C0BPacketEntityAction(mc.thePlayer, C0BPacketEntityAction.Action.STOP_SLEEPING));
            }
        }
    }

    @Override
    public String getSuffix() {
        return mode.getDisplayValue();
    }

    private enum Mode {
        MINIBLOX
    }

}
